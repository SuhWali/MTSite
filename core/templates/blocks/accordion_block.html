<div class="block-accordion mb-4">
    <div class="accordion" id="accordion-{{ id }}">
        {% for item in value.items %}
        <div class="accordion-item">
            <h2 class="accordion-header" id="heading-{{ id }}-{{ forloop.counter }}">
                <button class="accordion-button {% if not forloop.first %}collapsed{% endif %}" 
                        type="button" 
                        data-bs-toggle="collapse" 
                        data-bs-target="#collapse-{{ id }}-{{ forloop.counter }}" 
                        aria-expanded="{% if forloop.first %}true{% else %}false{% endif %}" 
                        aria-controls="collapse-{{ id }}-{{ forloop.counter }}">
                    {{ item.title }}
                </button>
            </h2>
            <div id="collapse-{{ id }}-{{ forloop.counter }}" 
                 class="accordion-collapse collapse {% if forloop.first %}show{% endif %}" 
                 aria-labelledby="heading-{{ id }}-{{ forloop.counter }}" 
                 data-bs-parent="#accordion-{{ id }}">
                <div class="accordion-body">
                    {{ item.content }}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>  
</div>

<script>
function toggleAccordion(element) {
    // Toggle the active state
    const expanded = element.getAttribute('aria-expanded') === 'true';
    element.setAttribute('aria-expanded', !expanded);
    
    // Toggle the content visibility
    const content = element.nextElementSibling;
    content.classList.toggle('hidden');
    
    // Rotate the icon
    const icon = element.querySelector('.accordion-icon');
    icon.classList.toggle('rotate-180');
}
</script> 